{% extends 'base.html' %}
{% block title %}
  Фонд учебников
{% endblock %}
{% block content %}
  {% include 'includes/form.html' with card_header='Добавление учебника' button='Добавить' %}
  <table class="table table-bordered table-hover table-sm">
    <tr>
      <th>Образовательная система</th><th>Автор</th><th>Название</th><th>Класс</th>
      <th>Количество</th><th>Общее количество</th>
    </tr>
    {% for item in funds %}
      <tr>
        <td>{{ item.book.system }}</td>
        <td>{{ item.book.author }}</td>
        <td>{{ item.book.title }}</td><td>{{ item.book.grades }}</td>
        <td>{{ item.fund_count }}</td><td>{{ item.overall_count }}</td>
      </tr>
    {% endfor %}
  </table>
  <script src="https://code.jquery.com/jquery-3.5.1.min.js"
          integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-beta.1/dist/js/select2.min.js"></script>
  <script>
      $(document).ready(function () {
          $('#id_book').select2({
              ajax: {
                  url: '{% url 'funds:index' %}',
                  dataType: 'json',
                  processResults: function (data) {
                      return {
                          results: $.map(data, function (item) {
                              return {id: item.id, text: item.text};
                          })
                      };
                  }
              },
              minimumInputLength: 3,
              language: "ru",
              width: "100%",
          });
      });
  </script>
{% endblock %}